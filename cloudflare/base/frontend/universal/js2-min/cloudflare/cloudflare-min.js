var OPEN_HELP=-1,VALID=[],CF_RECS={},NUM_RECS=0,REC_TEXT=[],WWW_DOM_INFO=[],CF_LANG={creating_account:"Creating Your CloudFlare Account. This may take several minutes.",signup_welcome:"Welcome to CloudFlare",signup_info:'Generate a CloudFlare password <a href="https://www.cloudflare.com/forgot-password.html" target="_blank">here</a>. Your CloudFlare email is curently set to {email}. Click <a href="">here</a> to continue.',tooltip_zone_cf_off:"CloudFlare is currently off. Click to enable",tooltip_zone_cf_on:"CloudFlare is currently on. Click to disable"},get_lang_string=function(a,b){var c=CF_LANG[a],b=b||{};if(c)try{return YAHOO.lang.substitute(c,b)}catch(d){}return""},signup_to_cf=function(){var a,b,c,d=YAHOO.util.Dom.get("USER_tos").checked;if(!d)return console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.Error,"Please agree to the Terms of Service before continuing."),!1;var e=YAHOO.util.Dom.get("USER_email").value,f=YAHOO.util.Dom.get("USER_user").value,g={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"user_create",user:f,email:e,password:YAHOO.util.Dom.get("USER_pass").value,homedir:USER_HOME_DIR},h={success:function(c){try{var d=YAHOO.lang.JSON.parse(c.responseText);d.cpanelresult.error?(YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.Error,d.cpanelresult.error)):"success"==d.cpanelresult.data[0].result?(a=get_lang_string("signup_welcome"),b=get_lang_string("signup_info",{email:e}),YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","success",a,b),setTimeout("window.location.reload(true)",1e4)):(YAHOO.util.Dom.setStyle("add_USER_record_button","display","block"),124==d.cpanelresult.data[0].err_code?(YAHOO.util.Dom.setStyle("cf_pass_noshow","display","table-row"),YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.Error,"This email is already signed up with CloudFlare. Please provide the user's CloudFlare password to continue.")):(YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.Error,d.cpanelresult.data[0].msg.replace(/\\/g,""))))}catch(f){YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}},failure:function(){YAHOO.util.Dom.setStyle("add_USER_record_button","display","block"),YAHOO.util.Dom.get("add_USER_record_status").innerHTML="",console.log("here!"),CPANEL.widgets.status_bar("add_USER_status_bar","error",CPANEL.lang.ajax_error,CPANEL.lang.ajax_try_again)}};YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(g),h,""),YAHOO.util.Dom.setStyle("add_USER_record_button","display","none"),c=get_lang_string("creating_account"),YAHOO.util.Dom.get("add_USER_record_status").innerHTML=CPANEL.icons.ajax+" "+c},reset_form=function(){VALID=[],CF_RECS={},NUM_RECS=0,REC_TEXT=[],WWW_DOM_INFO=[]},add_validation=function(){},handleLearnMore=function(a){return a?(YAHOO.util.Dom.setStyle("cf_def_show","display","none"),YAHOO.util.Dom.setStyle("cf_def_noshow","display","block")):(YAHOO.util.Dom.setStyle("cf_def_show","display","block"),YAHOO.util.Dom.setStyle("cf_def_noshow","display","none")),!1},toggle_domain=function(){var a=YAHOO.util.Dom.get("domain").value;"_select_"==a?$("#add_record_and_zone_table").slideUp(CPANEL.JQUERY_ANIMATION_SPEED):($("#add_record_and_zone_table").slideDown(CPANEL.JQUERY_ANIMATION_SPEED),update_user_records_table()),reset_form("CNAME")},update_zones=function(a,b,c,d){var e={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);c.cpanelresult.error?update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_"+a,"error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}):"error"==c.cpanelresult.data[0].result?update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_"+a,"error",CPANEL.lang.json_error,c.cpanelresult.data[0].msg.replace(/\\/g,""))}):update_user_records_rows([a])}catch(d){update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_"+a,"error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)})}},failure:function(){YAHOO.util.Dom.get("status_bar_"+a).innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},f=[];for(key in CF_RECS)CF_RECS[key]&&f.push(key);var g={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"zone_set",zone_name:YAHOO.util.Dom.get("domain").value,user_key:USER_ID,subdomains:f.join(","),cf_recs:YAHOO.lang.JSON.stringify(CF_RECS),homedir:USER_HOME_DIR};c&&(g.old_rec=c,g.old_line=d),YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(g),e,""),YAHOO.util.Dom.get("cloudflare_table_edit_"+a).innerHTML='<div style="padding: 20px">'+CPANEL.icons.ajax+" "+CPANEL.lang.ajax_loading+"</div>"},toggle_record_off=function(a,b,c){CF_RECS[b]=0,update_zones(a,"",b,c)},toggle_record_on=function(a,b,c){if(CF_ON_CLOUD_MESSAGE){var d=60,e="message",f="cf-toggle-on";$.cf.notify(CF_ON_CLOUD_MESSAGE,e,d,f)}CF_RECS[b]=c,update_zones(a,"_off")},is_domain_cf_powered=function(a){for(var b=!1,c=0,d=a.length;d>c;c++)if(a[c].type.match(/^(CNAME)$/)&&a[c].cloudflare){b=!0;break}return b},build_dnszone_cache=function(a){NUM_RECS=a.length;for(var b=get_lang_string("tooltip_zone_cf_on"),c=get_lang_string("tooltip_zone_cf_off"),d=0;d<a.length;d++)a[d].type.match(/^(CNAME)$/)&&(1==a[d].cloudflare?(CF_RECS[a[d].name]=a[d].line,REC_TEXT[d]=b,a[d].name.match(/^(www\.)/)&&(WWW_DOM_INFO=[d,a[d].name,a[d].line])):(REC_TEXT[d]=c,a[d].name.match(/^(www\.)/)&&(WWW_DOM_INFO=[d,a[d].name,a[d].line])))},build_dnszone_row_markup=function(a,b,c){var d="";return"CNAME"==a&&(d+='<td id="name_value_'+b+'">'+c.type+"</td>",d+='<td id="type_value_'+b+'">'+c.name.substring(0,c.name.length-1)+"</td>","CNAME"==c.type&&(d+='<td colspan="2" id="value_value_hehe_'+b+'"><span class="text-nonessential">points to</span> '+c.cname+"</td>"),d+="<td>",d+=1==c.cloudflare?'<span class="action_link" id="cloudflare_table_edit_'+b+'" onclick="toggle_record_off('+b+", '"+c.name+"', "+c.line+' )"><img src="../images/cloudflare/icon-cloud-on.png" class="cf_enabled" /></span>':'<span class="action_link" id="cloudflare_table_edit_'+b+'" onclick="toggle_record_on('+b+", '"+c.name+"', "+c.line+' )"><img src="../images/cloudflare/icon-cloud-bypass.png" class="cf_disabled'+b+'"/></span>',d+="</td>"),d},build_dnszone_table_markup=function(a){var b=YAHOO.util.Dom.get("domain").value;if(a.length<1)return"";var c="<h4>Website Records</h4>";c+='<table id="table_dns_zone" class="table table-hover" border="0" cellspacing="0" cellpadding="0">',c+="<thead>",c+='<tr class="dt_header_row">',c+="<th>type</th>",c+="<th>name</th>",c+='<th colspan="2">record</th>',c+="<th>CloudFlare status</th>",c+="</tr>",c+="</thead>",build_dnszone_cache(a);for(var d=0;d<a.length;d++)a[d].type.match(/^(CNAME)$/)&&(c+='<tr id="info_row_'+d+'" class="dt_info_row">',c+=build_dnszone_row_markup("CNAME",d,a[d]),c+="</tr>",c+='<tr id="module_row_'+d+'" class="dt_module_row"><td colspan="7">',c+='<div id="dnszone_table_edit_div_'+d+'" class="dt_module"></div>',c+='<div id="dnszone_table_delete_div_'+d+'" class="dt_module"></div>',c+='<div id="status_bar_'+d+'" class="cjt_status_bar"></div>',c+="</td></tr>");for(var d=0;d<a.length;d++)a[d].type.match(/^(A)$/)&&(c+='<tr id="info_row_a_'+d+'" class="dt_info_row">',c+='<td id="name_value_a_'+d+'">'+a[d].type+"</td>",c+='<td id="type_value_a_'+d+'">'+a[d].name.substring(0,a[d].name.length-1)+"</td>","A"==a[d].type&&(c+='<td colspan="2" id="value_value_hehe_a_'+d+'">'+a[d].address+"</td>"),c+="<td>",c+='<a href="javascript:void(0);" class="btn" onclick="show_a_help('+d+",'"+a[d].name+"')\">Run on CloudFlare</a>",c+="</td>",c+="</tr>",c+='<tr id="module_row_a_'+d+'" class="dt_module_row"><td colspan="7">',c+="</td></tr>");return c+="</table>",NUM_RECS>0&&(is_domain_cf_powered(a)?(YAHOO.util.Dom.get("cf_powered_"+b).innerHTML='<span class="label label-success">Powered by CloudFlare</span>',YAHOO.util.Dom.get("cf_powered_stats"+b).innerHTML='<a href="javascript:void(0);" class="btn btn-info" onclick="return get_stats(\''+b+"');\">Statistics and Settings</a>",YAHOO.util.Dom.get("cf_powered_check"+b).innerHTML='<img src="../images/cloudflare/icon-cloud-on.png" onclick="toggle_all_off(\''+b+"')\" />"):(YAHOO.util.Dom.get("cf_powered_"+b).innerHTML='<span class="label">Not Powered by CloudFlare</span>',YAHOO.util.Dom.get("cf_powered_stats"+b).innerHTML="&nbsp;",YAHOO.util.Dom.get("cf_powered_check"+b).innerHTML='<img src="../images/cloudflare/icon-cloud-bypass.png" onclick="toggle_www_on(\''+b+"')\" />")),c},update_user_records_rows=function(a,b){var c=YAHOO.util.Dom.get("domain").value,d={success:function(d){try{var e=YAHOO.lang.JSON.parse(d.responseText);if(e.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else if(e.cpanelresult.data){build_dnszone_cache(e.cpanelresult.data);for(var f=0,g=a.length;g>f;f++){var h=a[f],i=build_dnszone_row_markup("CNAME",h,e.cpanelresult.data[h]);$("#info_row_"+h).html(i),new YAHOO.widget.Tooltip("tt_cf_enabled_"+h,{context:"cloudflare_table_edit_"+h,text:REC_TEXT[h],showDelay:300})}NUM_RECS>0&&(is_domain_cf_powered(e.cpanelresult.data)?(YAHOO.util.Dom.get("cf_powered_"+c).innerHTML='<span class="label label-success">Powered by CloudFlare</span>',YAHOO.util.Dom.get("cf_powered_stats"+c).innerHTML='<a href="javascript:void(0);" class="btn btn-info" onclick="return get_stats(\''+c+"');\">Statistics and Settings</a>",YAHOO.util.Dom.get("cf_powered_check"+c).innerHTML='<img src="../images/cloudflare/icon-cloud-on.png" onclick="toggle_all_off(\''+c+"')\" />"):(YAHOO.util.Dom.get("cf_powered_"+c).innerHTML='<span class="label">Not Powered by CloudFlare</span>',YAHOO.util.Dom.get("cf_powered_stats"+c).innerHTML="&nbsp;",YAHOO.util.Dom.get("cf_powered_check"+c).innerHTML='<img src="../images/cloudflare/icon-cloud-bypass.png" onclick="toggle_www_on(\''+c+"')\" />")),b&&b();var j=YAHOO.util.Dom.getY("user_records_div");window.scrollTo(0,j)}else YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}catch(k){console.log("here!"),CPANEL.widgets.status_bar("add_CNAME_status_bar","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},e={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"fetchzone",domain:YAHOO.util.Dom.get("domain").value,homedir:USER_HOME_DIR};YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(e),d,"");for(var f=0,g=a.length;g>f;f++){var h=a[f];YAHOO.util.Dom.get("cloudflare_table_edit_"+h).innerHTML='<div style="padding: 20px">'+CPANEL.icons.ajax+" "+CPANEL.lang.ajax_loading+"</div>"}},update_user_records_table=function(a){var b={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);if(c.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else if(c.cpanelresult.data){var d=build_dnszone_table_markup(c.cpanelresult.data);YAHOO.util.Dom.get("user_records_div").innerHTML='<a name="user_recs_'+YAHOO.util.Dom.get("domain").value+'"></a>'+d;for(var e=0;NUM_RECS>e;e++)new YAHOO.widget.Tooltip("tt_cf_enabled_"+e,{context:"cloudflare_table_edit_"+e,text:REC_TEXT[e],showDelay:300});a&&a();var f=YAHOO.util.Dom.getY("user_records_div");window.scrollTo(0,f)}else YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}catch(g){console.log(g),CPANEL.widgets.status_bar("add_CNAME_status_bar","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},c={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"fetchzone",domain:YAHOO.util.Dom.get("domain").value,homedir:USER_HOME_DIR};YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(c),b,""),YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.ajax+" "+CPANEL.lang.ajax_loading+" [This may take several minutes]</div>"},refresh_records=function(a){var b={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);c.cpanelresult.error?YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>":c.cpanelresult.data?(build_dnszone_cache(c.cpanelresult.data),a&&a()):YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}catch(d){console.log("here!"),CPANEL.widgets.status_bar("add_CNAME_status_bar","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},c={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"fetchzone",domain:YAHOO.util.Dom.get("domain").value,homedir:USER_HOME_DIR};YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(c),b,""),YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.ajax+" "+CPANEL.lang.ajax_loading+" [This may take several minutes]</div>"},push_all_off=function(){var a={success:function(a){try{var b=YAHOO.lang.JSON.parse(a.responseText);b.cpanelresult.error?update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_0","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)}):"error"==b.cpanelresult.data[0].result?update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_0","error",CPANEL.lang.json_error,b.cpanelresult.data[0].msg.replace(/\\/g,""))}):update_user_records_table()}catch(c){update_user_records_table(function(){console.log("here!"),CPANEL.widgets.status_bar("status_bar_0","error",CPANEL.lang.json_error,CPANEL.lang.json_parse_failed)})}},failure:function(){YAHOO.util.Dom.get("status_bar_0").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},b=[];for(key in CF_RECS)CF_RECS[key]&&b.push(key+":"+CF_RECS[key]);var c={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"zone_delete",zone_name:YAHOO.util.Dom.get("domain").value,user_key:USER_ID,subdomains:b.join(","),homedir:USER_HOME_DIR};YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(c),a,"")},toggle_www_on=function(a){reset_form(),YAHOO.util.Dom.get("domain").value=a;var b=function(){WWW_DOM_INFO[2]&&toggle_record_on(WWW_DOM_INFO[0],WWW_DOM_INFO[1],WWW_DOM_INFO[2])};return update_user_records_table(b),!1},toggle_all_off=function(a){return reset_form(),YAHOO.util.Dom.get("domain").value=a,refresh_records(push_all_off),!1},enable_domain=function(a){return reset_form(),YAHOO.util.Dom.get("domain").value=a,toggle_domain(),!1},change_cf_accnt=function(){window.open("https://www.cloudflare.com/cloudflare-settings.html?z="+YAHOO.util.Dom.get("domain").value,"_blank")},change_cf_setting=function(a,b,c){YAHOO.util.Dom.get("domain").value=a;var d={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);if(c.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else{if("error"!=c.cpanelresult.data[0].result)return get_stats(a),!1;YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+c.cpanelresult.data[0].msg+"</div>"}}catch(d){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+d+"</div>"}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}};"SecurityLevelSetting"==c?c=YAHOO.util.Dom.get(c).value:"AlwaysOnline"==c?c=YAHOO.util.Dom.get(c).value:"AutomaticIPv6"==c?c=YAHOO.util.Dom.get(c).value:"CachingLevel"==c&&(c=YAHOO.util.Dom.get(c).value);var e={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"zone_edit_cf_setting",zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,v:c,a:b,homedir:USER_HOME_DIR};return YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(e),d,""),!1},hide_a_help=function(a){YAHOO.util.Dom.get("module_row_a_"+a).innerHTML='<td colspan="7"></td>',OPEN_HELP=-1},show_a_help=function(a,b){return OPEN_HELP>=0&&(YAHOO.util.Dom.get("module_row_a_"+OPEN_HELP).innerHTML='<td colspan="7"></td>'),YAHOO.util.Dom.get("module_row_a_"+a).innerHTML='<td colspan="7"><div style="padding: 20px">A type records cannot be directly routed though the CloudFlare network. Instead, click <a href="../zoneedit/advanced.html">here</a> and either switch the type of '+b+" to CNAME, or else make a new CNAME record pointing to "+b+"</div></td>",OPEN_HELP=a,!1},showHelp=function(a){var b={devmode:"CloudFlare makes your website load faster by caching static resources like images, CSS and Javascript. If you are editing cachable content (like images, CSS, or JS) and want to see the changes right away, you should enter <b>Development mode</b>. This will bypass CloudFlare's cache. Development mode will automatically toggle off after <b>3 hours</b>. Hint: Press shift-reload if you do not see your changes immediate. If you forget to enter Development mode, you should log in to your CloudFlare.com account and use Cache Purge.",seclvl:" CloudFlare provides security for your website and you can adjust your security setting for each website. A <b>low</b> security setting will challenge only the most threatening visitors. A <b>high</b> security setting will challenge all visitors that have exhibited threatening behavior within the last 14 days. We recommend starting with a high or medium setting.",uniques:"Visitors are classified by regular traffic, search engine crawlers and threats. Unique visitors is defined by unique IP addresses.",visits:"Traffic is classified by regular, search engine crawlers and threats. Page Views is defined by the number of requests to your site which return HTML.",pageload:"CloudFlare visits the home page of your website from several locations around the world from shared hosting. We do the same request twice: once through the CloudFlare system, and once directly to your site, so bypassing the CloudFlare system. We report both page load times here. CloudFlare improves the performance of your website by caching static resources like images, CSS and Javascript closer to your visitors and by compressing your requests so they are delivered quickly.",hits:"CloudFlare sits in front of your server and acts as a proxy, which means your traffic passes through our network. Our network nodes are distributed all over the world. We cache your static resources like images, CSS and Javascript at these nodes and deliver them to your visitors in those regions. By serving certain resources from these nodes, not only do we make your website load faster for your visitors, but we save you requests from your origin server. This means that CloudFlare offsets load so your server can perform optimally. CloudFlare does not cache html.",bandwidth:"Just like CloudFlare saves you requests to your origin server, CloudFlare also saves you bandwidth. By serving cached content from CloudFlare's nodes and by stopping threats before they reach your server, you will see less bandwidth usage from your origin server.",fpurge_ts:"Immediately purge all cached resources for your website. This will force CloudFlare to expire all static resources cached prior to the button click and fetch a new version.",ipv46:"Automatically enable IPv6 networking for all your orange-clouded websites. CloudFlare will listen to <a href='http://en.wikipedia.org/wiki/IPv6'>IPv6</a> even if your host or server only supports IPv4.",ob:"Automatically enable always online for web pages that lose connectivity or time out. Seamlessly bumps your visitors back to normal browsing when your site comes back online.",cache_lvl:"Adjust your caching level to modify CloudFlare's caching behavior. The <b>basic</b> setting will cache most static resources (i.e., css, images, and JavaScript). The <b>aggressive</b> setting will cache all static resources, including ones with a query string.<br /><br />Basic: http://example.com/pic.jpg<br />Aggressive: http://example.com/pic.jpg?with=query",pro:"Choose your CloudFlare plan. Upgrading will make your website even faster, even safer and even smarter. <b>SSL support</b> is included in every plan and will be <b>automatically</b> provisioned. All plans are month to month: no long-term contracts! ",railgun:"Railgun is a WAN optimization technology that caches dynamic content. It speeds up the delivery of previously non-cached pages, making your site even faster."};if("DN"in window){var c;"CF"in window&&"lightbox"in window.CF?(c=window.CF.lightbox,c.cfg.contentString=b[a]):(window.CF=window.CF||{},window.CF.lightbox=c=new DN.Lightbox({contentString:b[a],animate:!1,maxWidth:500})),c.show.call(c,this)}return!1},set_railgun=function(a,b){YAHOO.util.Dom.get("domain").value=a;var c={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);if(c.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else{if("error"!=c.cpanelresult.data[0].result)return get_stats(a),!1;YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+c.cpanelresult.data[0].msg+"</div>"}}catch(d){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+d+"</div>"}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}};tag=YAHOO.util.Dom.get(b).value;var d="set_railgun";"remove"==tag&&(d="remove_railgun");var e={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:d,zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,tag:tag,homedir:USER_HOME_DIR};return YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(e),c,""),!1},set_railgun_mode=function(a,b,c){YAHOO.util.Dom.get("domain").value=a;var d={success:function(b){try{var c=YAHOO.lang.JSON.parse(b.responseText);if(c.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else{if("error"!=c.cpanelresult.data[0].result)return get_stats(a),!1;YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+c.cpanelresult.data[0].msg+"</div>"}}catch(d){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+d+"</div>"}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}};tag=YAHOO.util.Dom.get(b).value;var e="enabled";"0"==YAHOO.util.Dom.get(c).value&&(e="disabled");var f={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"set_railgun_mode",zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,tag:tag,mode:e,homedir:USER_HOME_DIR};return YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(f),d,""),!1},get_stats=function(a){reset_form(),YAHOO.util.Dom.get("domain").value=a;var b={success:function(b){function c(){var a={success:function(a){try{var b=YAHOO.lang.JSON.parse(a.responseText);g=a,b.cpanelresult.error?console.log("Hey, it didn't work."):"error"==b.cpanelresult.data[0].result?console.log("Seriously, it didn't work."):f=null==b.cpanelresult.data[0].response.railgun_conn.obj?null:b.cpanelresult.data[0].response.railgun_conn.obj}catch(c){console.log("It was an exception. Happy?")}},failure:function(){console.log("It failed.")}},b={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"get_active_railguns",zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,homedir:USER_HOME_DIR};connection=YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(b),a,"")}function d(b){var c="";if(null!=b){I=b,c+='<div class="control-label"><label>Railgun <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'railgun\')"></i></span></label></div>',c+='<div class="controls">',c+='<select name="Railgun" id="Railgun" onChange="set_railgun(\''+a+"','Railgun')\">",c+='<option value="remove">Railgun Not Selected</option>';for(var d=!1,e=!1,g=0;g<I.length;g++)c+='<option value="'+I[g].railgun_tag+'" ',null!=f&&f.railgun_pubname==I[g].railgun_pubname&&(c+="selected",e=!0),c+=">"+I[g].railgun_pubname,"0"==I[g].railgun_mode&&(c+=" (Disabled)",d=!0),c+="</option>";c+="</select>",e&&(d||(c+=" ",c+='<select name="RailgunStatus" id="RailgunStatus" onChange="set_railgun_mode(\''+a+"','Railgun', 'RailgunStatus')\">",c+='<option value="0">Off</option>',c+='<option value="1"'+("1"==f.railgun_conn_mode?"selected":"")+">On</option>",c+="</select>")),YAHOO.util.Dom.get("rglist").innerHTML=c}}try{var e=YAHOO.lang.JSON.parse(b.responseText);if(e.cpanelresult.error)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>";else if("error"==e.cpanelresult.data[0].result)YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+e.cpanelresult.data[0].msg+"</div>";else{var f,g;c(a);var h,i=e.cpanelresult.data[0].response.result,j=i.objs[0],k={decimalPlaces:0,decimalSeparator:".",thousandsSeparator:","},l={decimalPlaces:2,decimalSeparator:".",thousandsSeparator:","},m=new Date(parseInt(i.timeZero)),n=new Date(parseInt(i.timeEnd));if(m>n)h="<h4>Basic Statistics for "+YAHOO.util.Dom.get("domain").value+"</h4>",h+='<p>Basic statistics update every 24 hours for the free service. For 15 minute statistics updates, advanced security and faster performance, upgrade to the <a href="https://www.cloudflare.com/plans" target="_blank">Pro service</a>.</p>';else{var o=YAHOO.util.Date.format(m,{format:"%B %e, %Y"}),p=YAHOO.util.Date.format(n,{format:"%B %e, %Y"});h=o===p?"<h4>Basic Statistics for "+YAHOO.util.Dom.get("domain").value+" &middot; "+o+"</h4>":"<h4>Basic Statistics for "+YAHOO.util.Dom.get("domain").value+" &middot; "+o+" to "+p+"</h4>",h+='<table id="table_dns_zone" class="table table-hover" border="0" cellspacing="0">',h+="<thead>",h+='<tr class="dt_header_row">',h+='<th width="100">&nbsp;</th>',h+="<th>regular traffic</th>",h+="<th>crawlers/bots</th>",h+="<th>threats</th>",h+="<th>info</th>",h+="</tr>",h+="</thead>",h+="<tbody>",h+='<tr class="dt_module_row rowA">',h+='<td width="100">Page Views</td>',h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.pageviews.regular),k)+"</td>",h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.pageviews.crawler),k)+"</td>",h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.pageviews.threat),k)+"</td>",h+='<td style="text-align:center;"><span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'visits\')"></i></span></td>',h+="</tr>",h+='<tr class="dt_module_row rowB">',h+='<td width="100">Unique Visitors</td>',h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.uniques.regular),k)+"</td>",h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.uniques.crawler),k)+"</td>",h+='<td style="text-align:center;">'+YAHOO.util.Number.format(parseInt(j.trafficBreakdown.uniques.threat),k)+"</td>",h+='<td style="text-align:center;"><span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'uniques\')"></td>',h+="</tr>",h+="</tbody>",h+="</table>",h+='<p><table id="table_dns_zone" class="table table-hover" border="0" cellspacing="0" cellpadding="0">',h+="<tr><td>";var q=YAHOO.util.Number.format(parseInt(j.requestsServed.cloudflare+j.requestsServed.user),k),r=YAHOO.util.Number.format(parseInt(j.requestsServed.cloudflare),k),s=parseInt(j.requestsServed.cloudflare)/parseInt(j.requestsServed.cloudflare+j.requestsServed.user)*100;isNaN(s)&&(s=0);var t=parseFloat(j.bandwidthServed.cloudflare)+parseFloat(j.bandwidthServed.user),u=parseFloat(j.bandwidthServed.cloudflare),v=u/t*100;isNaN(v)&&(v=0);var w=" KB",x=" KB";t>=102.4&&(t/=1024,w=" MB"),u>=102.4&&(u/=1024,x=" MB"),t=YAHOO.util.Number.format(t,l),u=YAHOO.util.Number.format(u,l);var y=0,z=0,A=0;j.pageLoadTime&&(y=parseFloat(j.pageLoadTime.without),z=parseFloat(j.pageLoadTime.cloudflare),A=Math.floor(100*(1-z/y))+"%"),h+="</tr></td>",h+="</table></p>",h+='<div id="analytics-stats">',h+='<div class="columns two">',h+='<div class="column">',h+='<h4>Requests Saved <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'hits\')"></i></span></h4>',h+='<table class="table"><tr><td> <div class="analytics-chart" id="analytics-speed-requs-chart"> <img src="https://chart.googleapis.com/chart?cht=p&chco=ed7200|505151&chs=80x80&chd=t:'+s+","+(100-s)+'" width="80" height="80"> </div> </td><td> <div class="analytics-speed-savedByCF"><span id="analytics-speed-reqs-savedByCF">'+r+'</span> requests saved by CloudFlare</div> <div class="analytics-speed-total"><span id="analytics-speed-reqs-total">'+q+"</span> total requests</div>  </td></tr></table>",h+="</div>",h+='<div class="column">',h+='<h4>Bandwidth Saved <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'bandwidth\')"></i></span></h4>',h+='<table class="table"><tr><td> <div class="analytics-chart" id="analytics-speed-bandwidth-chart"> <img src="https://chart.googleapis.com/chart?cht=p&chco=ed7200|505151&chs=80x80&chd=t:'+v+","+(100-v)+'" width="80" height="80"> </div> </td><td> <div class="analytics-speed-savedByCF"><span id="analytics-speed-bandwidth-savedByCF">'+u+x+'</span> bandwidth saved by CloudFlare</div> <div class="analytics-speed-total"><span id="analytics-speed-bandwidth-total">'+t+w+"</span> total bandwidth</div>  </td></tr></table>",h+="</div>",h+="</div>",h+="</div>",h+='<p><a href="http://www.cloudflare.com/analytics" target="_blank"><div id="analytics-cta" class="btn btn-primary">See more statistics</div></a></p>',h+='<p>Note: Basic statistics update every 24 hours. For 15 minute statistics updates, advanced security and faster performance, upgrade to the <a href="https://www.cloudflare.com/plans" target="_blank">Pro service</a>.</p>',h+="<hr />"
}h+='<A NAME="infobox"></A>',h+="<h4>CloudFlare Settings for "+YAHOO.util.Dom.get("domain").value+"</h4>",h+='<fieldset id="table_dns_zone" class="form-horizontal">';{var B=j.userSecuritySetting,C=j.cache_lvl,D=j.ipv46,E=1e3*j.dev_mode,F=j.ob,G=j.currentServerTime,H=new Date;60*H.getTimezoneOffset()*1e3}h+='<div class="control-group">',h+='<div class="control-label"><label>Account Type <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'pro\')"></i></span></label></div>',h+='<div class="controls">',h+='<select name="AccountType" id="AccountType" onChange="change_cf_accnt()">',h+='<option value="free"'+(j.pro_zone?"":"selected")+">Free</option>",h+='<option value="pro"'+(j.pro_zone?"selected":"")+">CloudFlare Pro</option>",h+="</select>",h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Security Setting <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'seclvl\')"></i></span></label></div>',h+='<div class="controls">',h+='<select name="SecurityLevelSetting" id="SecurityLevelSetting" onChange="change_cf_setting(\''+a+"', 'sec_lvl', 'SecurityLevelSetting')\">",h+='<option value="high"'+("High"==B?"selected":"")+">High</option>",h+='<option value="med"'+("Medium"==B?"selected":"")+">Medium</option>",h+='<option value="low"'+("Low"==B?"selected":"")+">Low</option>",h+='<option value="eoff"'+("Essentially Off"==B?"selected":"")+">Essentially Off</option>",h+='<option value="help"'+("I'm under attack!"==B?"selected":"")+">I'm under attack!</option>",h+="</select>",h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Development Mode <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'devmode\')"></i></span></label></div>',h+='<div class="controls">',E>G?(h+='<a href="javascript:void(0);" class="btn btn-success" onclick="change_cf_setting(\''+a+"', 'devmode', 0)\">Disable</a> ",h+='<span class="label label-danger">Ends at '+YAHOO.util.Date.format(new Date(E),{format:"%D %T"})+"</span>"):(h+='<a href="javascript:void(0);" class="btn btn-danger btn-small" onclick="change_cf_setting(\''+a+"', 'devmode', 1)\">Enable</a> ",h+='<span class="label label-success">Currently Off</span>'),h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Cache Purge <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'fpurge_ts\')"></i></span></label></div>',h+='<div class="controls">',h+='<a href="javascript:void(0);" class="btn btn-danger btn-small" onclick="change_cf_setting(\''+a+"', 'fpurge_ts', 1)\">Purge</a>",h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Always Online <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'ob\')"></i></span></label></div>',h+='<div class="controls">',h+='<select name="AlwaysOnline" id="AlwaysOnline" onChange="change_cf_setting(\''+a+"', 'ob', 'AlwaysOnline')\">",h+='<option value="0"'+("0"==F?"selected":"")+">Off</option>",h+='<option value="1"'+("1"==F?"selected":"")+">On</option>",h+="</select>",h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Automatic IPv6 <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'ipv46\')"></i></span></label></div>',h+='<div class="controls">',h+='<select name="AutomaticIPv6" id="AutomaticIPv6" onChange="change_cf_setting(\''+a+"', 'ipv46', 'AutomaticIPv6')\">",h+='<option value="0"'+("0"==D?"selected":"")+">Off</option>",h+='<option value="3"'+("3"==D?"selected":"")+">Full</option>",h+="</select>",h+="</div>",h+="</div>",h+='<div class="control-group">',h+='<div class="control-label"><label>Caching Level <span class="text-info"><i class="icon icon-info-sign" onclick="showHelp(\'cache_lvl\')"></i></span></label></div>',h+='<div class="controls">',h+='<select name="CachingLevel" id="CachingLevel" onChange="change_cf_setting(\''+a+"', 'cache_lvl', 'CachingLevel')\">",h+='<option value="agg"'+("agg"==C?"selected":"")+">Aggressive</option>",h+='<option value="basic"'+("basic"==C?"selected":"")+">Basic</option>",h+="</select>",h+="</div>",h+="</div>",h+='<div id="rglist" class="control-group">',h+="</div>",h+="</fieldset>",h+='<p>For more statistics and settings, sign into your account at <a href="https://www.cloudflare.com/analytics" target="_blank">CloudFlare</a>.</p>',YAHOO.util.Dom.get("user_records_div").innerHTML=h;var I;setTimeout(function(){var a={success:function(a){try{var b=YAHOO.lang.JSON.parse(a.responseText);b.cpanelresult.error?console.log("Hey, it didn't work."):"error"==b.cpanelresult.data[0].result?console.log("Seriously, it didn't work."):d(b.cpanelresult.data[0].response.railguns.objs)}catch(c){console.log("It was an exception. Happy?")}},failure:function(){console.log("It failed.")}},b={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"get_railguns",zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,homedir:USER_HOME_DIR};connection=YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(b),a,"")},500)}}catch(J){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+J+"</div>"}},failure:function(){YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.error+" "+CPANEL.lang.ajax_error+": "+CPANEL.lang.ajax_try_again+"</div>"}},c=[];for(key in CF_RECS)CF_RECS[key]&&c.push(key);var d={cpanel_jsonapi_version:2,cpanel_jsonapi_module:"CloudFlare",cpanel_jsonapi_func:"zone_get_stats",zone_name:YAHOO.util.Dom.get("domain").value,user_email:USER_EMAIL,user_api_key:USER_API_KEY,homedir:USER_HOME_DIR};return YAHOO.util.Connect.asyncRequest("GET",CPANEL.urls.json_api(d),b,""),YAHOO.util.Dom.get("user_records_div").innerHTML='<div style="padding: 20px">'+CPANEL.icons.ajax+" "+CPANEL.lang.ajax_loading+"</div>",!1},init_page=function(){var a=document.getElementById("USER_submit");YAHOO.util.Event.addListener(a,"click",signup_to_cf),YAHOO.util.Event.on("domain","change",toggle_domain),add_validation(),"_select_"!=YAHOO.util.Dom.get("domain").value&&update_user_records_table()};YAHOO.util.Event.onDOMReady(init_page),function(){var a=[["div.dt_module","display:none"]],b=document.styleSheets[0];a.forEach("insertRule"in b?function(a){b.insertRule(a[0]+" {"+a[1]+"}",0)}:function(a){b.addRule(a[0],a[1],0)})}();